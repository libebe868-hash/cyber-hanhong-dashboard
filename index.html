<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>汉鸿店铺 · 赛博数据战情室 V2.0</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-gauge@0.3.0"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{
            font-family:'Microsoft YaHei',Arial,sans-serif;
            background:#000;
            color:#0ff;
            overflow-x:hidden;
            position:relative;
        }
        /* 赛博粒子背景 + 霓虹流动 */
        #particles{
            position:fixed;top:0;left:0;width:100%;height:100%;z-index:-2;
        }
        body::before{
            content:'';position:fixed;top:0;left:0;width:100%;height:100%;
            background:linear-gradient(45deg,#ff00ff,#00ffff,#ffff00,#ff0080);
            background-size:400% 400%;
            animation:cyberFlow 20s linear infinite;
            opacity:0.15;filter:blur(80px);z-index:-1;
        }
        @keyframes cyberFlow{0%{background-position:0% 50%}100%{background-position:100% 50%}}

        .container{max-width:1560px;margin:0 auto;padding:20px;}

        /* 标题 + 月份切换 */
        .header{
            text-align:center;margin:30px 0;position:relative;z-index:10;
        }
        .title{
            font-size:48px;font-weight:bold;
            background:linear-gradient(90deg,#00ffff,#ff00ff,#ffff00);
            -webkit-background-clip:text;background-clip:text;
            color:transparent;
            text-shadow:0 0 30px #00ffff;
            animation:glitch 3s infinite;
        }
        @keyframes glitch{
            0%,100%{text-shadow:0 0 30px #00ffff}
            50%{text-shadow:5px 0 20px #ff00ff,-5px 0 20px #ffff00}
        }
        .month-selector{
            margin-top:20px;display:inline-block;
            background:rgba(0,255,255,0.15);border:2px solid #0ff;
            border-radius:50px;padding:12px 30px;
            box-shadow:0 0 30px rgba(0,255,255,0.6);
            animation:pulse 2s infinite;
        }

        /* 网格布局 */
        .grid{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(360px,1fr));
            gap:22px;
            margin-bottom:30px;
        }
        .full{width:100% !important;grid-column:1/-1;}

        /* 卡片通用赛博风格 */
        .card{
            background:rgba(10,10,30,0.7);
            border:1px solid #0ff;
            border-radius:16px;
            padding:20px;
            position:relative;
            overflow:hidden;
            backdrop-filter:blur(10px);
            box-shadow:0 0 30px rgba(0,255,255,0.3);
            transition:all .4s;
        }
        .card:hover{
            transform:translateY(-12px) scale(1.02);
            box-shadow:0 0 60px rgba(0,255,255,0.7),inset 0 0 30px rgba(255,0,255,0.2);
        }
        .card h3{
            color:#0ff;text-align:center;margin-bottom:15px;
            text-shadow:0 0 15px #0ff;
            font-size:22px;
        }

        /* 特殊卡片颜色 */
        .purple{border-color:#f0f !important;box-shadow:0 0 30px rgba(255,0,255,0.4);}
        .yellow{border-color:#ff0 !important;box-shadow:0 0 30px rgba(255,255,0,0.4);}
        .green{border-color:#0f0 !important;box-shadow:0 0 30px rgba(0,255,0,0.4);}

        canvas{border-radius:12px;}
    </style>
</head>
<body>
    <canvas id="particles"></canvas>

    <div class="container">
        <div class="header">
            <h1 class="title">汉鸿店铺 · 赛博数据战情室 V2.0</h1>
            <div class="month-selector">
                <label for="monthSelect">月份：</label>
                <select id="monthSelect" onchange="updateAll()">
                    <option value="2025-01">2025年01月</option>
                    <option value="2025-02">2025年02月</option>
                    <option value="2025-03" selected>2025年03月</option>
                    <option value="2025-04">2025年04月</option>
                    <option value="2025-05">2025年05月</option>
                    <option value="2025-11">2025年11月（双11）</option>
                </select>
            </div>
        </div>

        <!-- 第1行：4个核心KPI大数字 -->
        <div class="grid">
            <div class="card purple"><h3>询盘总数</h3><h2 class="key" id="inquiry">0</h2></div>
            <div class="card"><h3>接待人数</h3><h2 class="key" id="reception">0</h2></div>
            <div class="card yellow"><h3>转化率</h3><h2 class="key" id="conversion">0%</h2></div>
            <div class="card green"><h3>客单价</h3><h2 class="key" id="avgPrice">¥0</h2></div>
        </div>

        <!-- 第2行：询盘&接待趋势双线图 + 渠道分布饼图 -->
        <div class="grid">
            <div class="card full">
                <h3>询盘 vs 接待人数趋势</h3>
                <canvas id="trendChart"></canvas>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <h3>询盘渠道分布</h3>
                <canvas id="channelChart"></canvas>
            </div>
            <div class="card purple">
                <h3>转化漏斗</h3>
                <canvas id="funnelChart"></canvas>
            </div>
            <div class="card yellow">
                <h3>Top5 询盘关键词</h3>
                <canvas id="keywordChart"></canvas>
            </div>
        </div>

        <!-- 第3行：业绩仪表盘 + 地域热力 + 环形进度 -->
        <div class="grid">
            <div class="card green">
                <h3>月度目标完成度</h3>
                <canvas id="gaugeChart"></canvas>
            </div>
            <div class="card">
                <h3>地域分布热力图</h3>
                <canvas id="polarChart"></canvas>
            </div>
            <div class="card purple">
                <h3>咨询时段分布（24h）</h3>
                <canvas id="radarChart"></canvas>
            </div>
        </div>
    </div>

    <!-- 粒子背景脚本 -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script>
        particlesJS("particles",{
            "particles":{"number":{"value":80},"color":{"value":"#00ffff"},"shape":{"type":"circle"},"opacity":{"value":0.6},"size":{"value":3},"line_linked":{"enable":true,"distance":150,"color":"#00ffff","opacity":0.4,"width":1},"move":{"enable":true,"speed":2}},
            "interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":true,"mode":"repulse"}}},
            "retina_detect":true
        });

        // ====================== 数据中心 ======================
        const DATA = {
            "2025-01": {inquiry:1230,reception:580,conversion:47.2,avgPrice:2380, target:1500,
                trend:[95,110,105,130,140,155,165], 
                channel:[35,25,20,12,8], 
                funnel:[100,72,58,47], 
                keywords:[280,220,180,150,120],
                regions:[30,25,20,15,10],
                hours:Array(24).fill(0).map((_,i)=>i%3===0?Math.random()*30+50:Math.random()*20+10)
            },
            "2025-02": {inquiry:1380,reception:650,conversion:47.1,avgPrice:2490, target:1600,
                trend:[110,125,120,140,155,170,180],
                channel:[38,23,18,13,8],
                funnel:[100,75,60,48],
                keywords:[320,250,200,170,140],
                regions:[32,27,18,13,10],
                hours:Array(24).fill(0).map((_,i)=>i%3===0?Math.random()*40+60:Math.random()*25+15)
            },
            "2025-03": {inquiry:1850,reception:892,conversion:48.2,avgPrice:2680, target:2000,
                trend:[140,165,155,185,205,220,238],
                channel:[40,22,20,10,8],
                funnel:[100,78,62,48],
                keywords:[420,350,280,220,180],
                regions:[35,28,20,12,5],
                hours:Array(24).fill(0).map((_,i)=>i%3===0?Math.random()*50+80:Math.random()*30+20)
            },
            "2025-04": {inquiry:2100,reception:1020,conversion:48.6,avgPrice:2790, target:2200,
                trend:[160,185,175,210,230,245,260],
                channel:[42,20,19,11,8],
                funnel:[100,80,65,49],
                keywords:[480,390,310,250,200],
                regions:[38,26,18,12,6],
                hours:Array(24).fill(0).map((_,i)=>i%3===0?Math.random()*60+90:Math.random()*35+25)
            },
            "2025-05": {inquiry:2350,reception:1160,conversion:49.4,avgPrice:2890, target:2500,
                trend:[180,210,200,240,260,280,300],
                channel:[45,18,18,11,8],
                funnel:[100,82,68,50],
                keywords:[520,420,340,280,230],
                regions:[40,25,18,10,7],
                hours:Array(24).fill(0).map((_,i)=>i%3===0?Math.random()*70+100:Math.random()*40+30)
            },
            "2025-11": {inquiry:4800,reception:2380,conversion:49.6,avgPrice:3180, target:5000,
                trend:[380,520,680,950,1200,850,720],
                channel:[48,25,15,8,4],
                funnel:[100,85,72,50],
                keywords:[1200,980,750,600,520],
                regions:[45,30,15,6,4],
                hours:Array(24).fill(0).map((_,i)=>i%3===0?Math.random()*200+300:Math.random()*100+80)
            }
        };

        let charts = {};

        function updateAll(){
            const m = document.getElementById('monthSelect').value;
            const d = DATA[m];

            // 大数字动画
            animateValue("inquiry",0,d.inquiry,1200);
            animateValue("reception",0,d.reception,1200);
            document.getElementById("conversion").textContent = d.conversion.toFixed(1)+"%";
            document.getElementById("avgPrice").textContent = "¥"+d.avgPrice.toLocaleString();

            // 更新所有图表
            charts.trend.data.datasets[0].data = d.trend;
            charts.trend.data.datasets[1].data = d.trend.map(v=>v*0.48);
            charts.trend.update();

            charts.channel.data.datasets[0].data = d.channel;
            charts.channel.update();

            charts.funnel.data.datasets[0].data = d.funnel;
            charts.funnel.update();

            charts.keyword.data.datasets[0].data = d.keywords;
            charts.keyword.update();

            charts.gauge.data.datasets[0].value = (d.inquiry/d.target*100).toFixed(1);
            charts.gauge.update();

            charts.polar.data.datasets[0].data = d.regions;
            charts.polar.update();

            charts.radar.data.datasets[0].data = d.hours;
            charts.radar.update();
        }

        // 数字滚动动画
        function animateValue(id,start,end,duration){
            let obj = document.getElementById(id);
            let startTime = null;
            function step(timestamp){
                if(!startTime) startTime = timestamp;
                let progress = Math.min((timestamp-startTime)/duration,1);
                obj.textContent = Math.floor(progress*(end-start)+start).toLocaleString();
                if(progress<1) requestAnimationFrame(step);
            }
            requestAnimationFrame(step);
        }

        window.onload = function(){
            const ctx1 = document.getElementById('trendChart').getContext('2d');
            charts.trend = new Chart(ctx1,{
                type:'line',data:{labels:['1日','5日','10日','15日','20日','25日','30日'],
                    datasets:[
                        {label:'询盘',data:[],borderColor:'#ff00ff',tension:0.4,fill:true,backgroundColor:'rgba(255,0,255,0.1)'},
                        {label:'接待',data:[],borderColor:'#00ffff',tension:0.4,fill:true,backgroundColor:'rgba(0,255,255,0.1)'}
                    ]},
                options:{plugins:{datalabels:{color:'#fff',font:{weight:'bold'}}},animation:{duration:1500}}
            });

            charts.channel = new Chart(document.getElementById('channelChart'),{
                type:'doughnut',data:{labels:['1688','阿里国际','谷歌','独立站','其他'],
                    datasets:[{data:[],backgroundColor:['#ff0080','#00ffff','#ffff00','#ff00ff','#00ff80']}]},
                options:{plugins:{datalabels:{color:'#fff',formatter:v=>v+'%'}}}
            });

            charts.funnel = new Chart(document.getElementById('funnelChart'),{
                type:'bar',data:{labels:['曝光','点击','询盘','成交'],
                    datasets:[{data:[],backgroundColor:['#00ffff','#00ff80','#ffff00','#ff0080']}]},
                options:{indexAxis:'y',plugins:{datalabels:{anchor:'end',align:'end',color:'#fff'}}}
            });

            charts.keyword = new Chart(document.getElementById('keywordChart'),{
                type:'bar',data:{labels:['女装连衣裙','夏季新款','韩版','雪纺裙','定制'],
                    datasets:[{data:[],backgroundColor:'#f0f'}]},
                options:{plugins:{datalabels:{color:'#fff'}}}
            });

            charts.gauge = new Chart(document.getElementById('gaugeChart'),{
                type:'gauge',data:{datasets:[{data:[0],value:0,backgroundColor:'#00ff00'}]},
                options:{needle:{value:50},valueLabel:{display:true}}
            });

            charts.polar = new Chart(document.getElementById('polarChart'),{
                type:'polarArea',data:{labels:['华东','华南','华北','西南','海外'],
                    datasets:[{data:[],backgroundColor:['#ff0080','#00ffff','#ffff00','#ff00ff','#00ff00']}]}
            });

            charts.radar = new Chart(document.getElementById('radarChart'),{
                type:'radar',data:{labels:Array.from({length:24},(_,i)=>i+'时'),
                    datasets:[{label:'咨询量',data:[],borderColor:'#ff00ff',backgroundColor:'rgba(255,0,255,0.2)'}]}
            });

            updateAll(); // 首次加载
        };
    </script>
</body>
</html>
